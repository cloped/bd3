cinema=# DROP TABLE IF EXISTS t;
NOTICE:  table "t" does not exist, skipping
DROP TABLE
cinema=# CREATE TABLE t (k serial PRIMARY KEY, v integer);
CREATE TABLE
cinema=# INSERT INTO t(v)
cinema-# SELECT trunc(random() * 10) FROM generate_series(1,100000);
INSERT 0 100000
cinema=# SELECT relname, relpages, reltuples FROM pg_class WHERE relname='t';
 relname | relpages | reltuples 
---------+----------+-----------
 t       |        0 |         0
(1 row)

cinema=# SELECT pg_sleep(1);
-[ RECORD 1 ]
pg_sleep | 

cinema=# \pset x on
Expanded display is on.
cinema=# SELECT * FROM pg_stats WHERE tablename = 't';


-[ RECORD 1 ]----------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
schemaname             | public
tablename              | t
attname                | k
inherited              | f
null_frac              | 0
avg_width              | 4
n_distinct             | -1
most_common_vals       | 
most_common_freqs      | 
histogram_bounds       | {1,1007,1957,2959,3919,4889,5817,6790,7753,8783,9737,10694,11723,12717,13675,14585,15568,16537,17501,18533,19497,20526,21578,22554,23486,24508,25514,26517,27516,28511,29412,30370,31350,32380,33384,34523,35463,36443,37401,38381,39331,40323,41290,42323,43370,44407,45401,46393,47427,48482,49523,50617,51702,52706,53732,54694,55714,56641,57597,58671,59635,60699,61687,62813,63765,64762,65770,66837,67746,68756,69743,70760,71790,72820,73820,74884,75903,76952,77928,78962,79962,80845,81857,82848,83955,85017,86062,87072,88085,89042,90075,91120,92112,93137,94162,95129,96081,97083,98058,98999,99996}
correlation            | 1
most_common_elems      | 
most_common_elem_freqs | 
elem_count_histogram   | 
-[ RECORD 2 ]----------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
schemaname             | public
tablename              | t
attname                | v
inherited              | f
null_frac              | 0
avg_width              | 4
n_distinct             | 10
most_common_vals       | {9,7,1,0,2,8,5,3,6,4}
most_common_freqs      | {0.103133,0.102333,0.1023,0.102233,0.100233,0.0991667,0.0982667,0.0981667,0.0979667,0.0962}
histogram_bounds       | 
correlation            | 0.101331
most_common_elems      | 
most_common_elem_freqs | 
elem_count_histogram   | 

-[ RECORD 1 ]-+-
pg_stat_reset | 

cinema=# \pset x off
Expanded display is off.

cinema=# CREATE INDEX i ON t (v DESC NULLS FIRST);
CREATE INDEX

cinema=# select * from t where v=2;
Time: 13,171 ms

cinema=# reindex table t 
cinema-# ;
REINDEX
Time: 379,085 ms


cinema=# DROP TABLE IF EXISTS t;
DROP TABLE
Time: 102,729 ms
cinema=# CREATE TABLE t (k serial PRIMARY KEY, v integer);
CREATE TABLE
Time: 51,859 ms
cinema=# SELECT trunc(random() * 10) FROM generate_series(1,1000000);
Time: 903,726 ms
cinema=# SELECT relname, relpages, reltuples FROM pg_class WHERE relname='t';
 relname | relpages | reltuples 
---------+----------+-----------
 t       |        0 |         0
(1 row)

Time: 0,826 ms

cinema=# SELECT pg_sleep(1);
 pg_sleep 
----------
 
(1 row)

Time: 1001,686 ms (00:01,002)
cinema=# \pset x on
cinema=# SELECT * FROM pg_stats WHERE tablename='t';
-[ RECORD 1 ]----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
schemaname             | public
tablename              | t
attname                | k
inherited              | f
null_frac              | 0
avg_width              | 4
n_distinct             | -1
most_common_vals       | 
most_common_freqs      | 
histogram_bounds       | {27,9611,19279,28952,38764,49735,59036,69004,79121,89014,100233,111242,121698,131973,141299,151518,160867,170374,179628,189530,199712,209885,219711,229489,239267,249803,260562,269994,279722,289160,298280,308827,319156,328212,338251,347988,358198,368395,378962,388436,398636,409084,419173,429938,439814,449349,458646,469575,478329,488730,498307,507722,517989,527317,536764,546862,555934,565577,575941,586632,596974,607312,617194,626495,636597,646442,656093,666002,676984,686912,697108,707677,717830,727699,738248,748370,757995,768437,777869,788153,797557,808147,817199,827285,838388,848825,858970,868562,879338,888951,898782,909273,918781,929022,939734,949911,960124,969138,978444,989069,999989}
correlation            | 1
most_common_elems      | 
most_common_elem_freqs | 
elem_count_histogram   | 
-[ RECORD 2 ]----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
schemaname             | public
tablename              | t
attname                | v
inherited              | f
null_frac              | 0
avg_width              | 4
n_distinct             | 10
most_common_vals       | {9,8,6,7,2,1,4,5,3,0}
most_common_freqs      | {0.102167,0.101667,0.1014,0.100933,0.1009,0.0998333,0.0990667,0.0988,0.0979,0.0973333}
histogram_bounds       | 
correlation            | 0.0847946
most_common_elems      | 
most_common_elem_freqs | 
elem_count_histogram   | 
cinema=# \pset x off
Expanded display is off.
cinema=# select * from t where v=2;
Time: 131,402 ms
cinema=# reindex table t;
REINDEX
Time: 851,866 ms



